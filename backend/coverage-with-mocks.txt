
> backend@1.0.0 test:coverage:with-mocks
> jest tests/with-mocks --coverage

  console.log
    [dotenv@17.2.3] injecting env (3) from .env.test -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit

      at _log (node_modules/dotenv/lib/main.js:142:11)

  console.log
    Starting test suite...

      at Object.<anonymous> (tests/setup.ts:9:11)

  console.log
    
    üöÄ Starting Error Handler Tests...

      at Object.<anonymous> (tests/with-mocks/errorHandler.mock.test.ts:103:13)

  console.log
    MongoDB Atlas connected successfully

      at connectDatabase (src/config/database.ts:22:13)

  console.log
    ‚úÖ Test setup complete.

      at Object.<anonymous> (tests/with-mocks/errorHandler.mock.test.ts:106:13)

  console.error
    Error: {
      message: 'Custom application error',
      statusCode: 400,
      stack: 'AppError: Custom application error\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/errorHandler.mock.test.ts:33:10\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:157:13)\n' +
        '    at Route.dispatch (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:117:3)\n' +
        '    at handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:435:11)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:295:15\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at jsonParser (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/body-parser/lib/types/json.js:100:7)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at trimPrefix (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:342:13)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:297:9\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:186:3)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/application.js:177:15)\n' +
        '    at Server.app (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/express.js:38:9)\n' +
        '    at Server.emit (node:events:519:28)\n' +
        '    at parserOnIncoming (node:_http_server:1173:12)\n' +
        '    at HTTPParser.parserOnHeadersComplete (node:_http_common:121:17)',
      timestamp: '2025-11-09T07:24:34.928Z',
      path: '/test/app-error',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (node_modules/router/lib/route.js:132:14)
      at tests/with-mocks/errorHandler.mock.test.ts:33:5
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at jsonParser (node_modules/body-parser/lib/types/json.js:100:7)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.error
    Error: {
      message: 'Resource not found',
      statusCode: 404,
      stack: 'AppError: Resource not found\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/errorHandler.mock.test.ts:140:14\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:157:13)\n' +
        '    at Route.dispatch (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:117:3)\n' +
        '    at handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:435:11)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:295:15\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:186:3)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/application.js:177:15)\n' +
        '    at Server.app (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/express.js:38:9)\n' +
        '    at Server.emit (node:events:519:28)\n' +
        '    at parserOnIncoming (node:_http_server:1173:12)\n' +
        '    at HTTPParser.parserOnHeadersComplete (node:_http_common:121:17)',
      timestamp: '2025-11-09T07:24:34.939Z',
      path: '/test/not-found',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (node_modules/router/lib/route.js:132:14)
      at tests/with-mocks/errorHandler.mock.test.ts:140:9
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.error
    Error: {
      message: 'Access forbidden',
      statusCode: 403,
      stack: 'AppError: Access forbidden\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/errorHandler.mock.test.ts:159:14\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:157:13)\n' +
        '    at Route.dispatch (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:117:3)\n' +
        '    at handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:435:11)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:295:15\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:186:3)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/application.js:177:15)\n' +
        '    at Server.app (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/express.js:38:9)\n' +
        '    at Server.emit (node:events:519:28)\n' +
        '    at parserOnIncoming (node:_http_server:1173:12)\n' +
        '    at HTTPParser.parserOnHeadersComplete (node:_http_common:121:17)',
      timestamp: '2025-11-09T07:24:34.944Z',
      path: '/test/forbidden',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (node_modules/router/lib/route.js:132:14)
      at tests/with-mocks/errorHandler.mock.test.ts:159:9
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.error
    Error: {
      message: 'Resource conflict',
      statusCode: 409,
      stack: 'AppError: Resource conflict\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/errorHandler.mock.test.ts:178:14\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:157:13)\n' +
        '    at Route.dispatch (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:117:3)\n' +
        '    at handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:435:11)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:295:15\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:186:3)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/application.js:177:15)\n' +
        '    at Server.app (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/express.js:38:9)\n' +
        '    at Server.emit (node:events:519:28)\n' +
        '    at parserOnIncoming (node:_http_server:1173:12)\n' +
        '    at HTTPParser.parserOnHeadersComplete (node:_http_common:121:17)',
      timestamp: '2025-11-09T07:24:34.949Z',
      path: '/test/conflict',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (node_modules/router/lib/route.js:132:14)
      at tests/with-mocks/errorHandler.mock.test.ts:178:9
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.error
    Error: {
      message: 'Unauthorized',
      statusCode: 401,
      stack: 'AppError: Unauthorized\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/errorHandler.mock.test.ts:197:14\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:157:13)\n' +
        '    at Route.dispatch (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:117:3)\n' +
        '    at handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:435:11)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:295:15\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:186:3)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/application.js:177:15)\n' +
        '    at Server.app (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/express.js:38:9)\n' +
        '    at Server.emit (node:events:519:28)\n' +
        '    at parserOnIncoming (node:_http_server:1173:12)\n' +
        '    at HTTPParser.parserOnHeadersComplete (node:_http_common:121:17)',
      timestamp: '2025-11-09T07:24:34.953Z',
      path: '/test/unauthorized',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (node_modules/router/lib/route.js:132:14)
      at tests/with-mocks/errorHandler.mock.test.ts:197:9
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.error
    Error: {
      message: 'Validation failed',
      statusCode: 400,
      stack: 'ValidationError: Validation failed\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/errorHandler.mock.test.ts:38:24\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:157:13)\n' +
        '    at Route.dispatch (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:117:3)\n' +
        '    at handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:435:11)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:295:15\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at jsonParser (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/body-parser/lib/types/json.js:100:7)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at trimPrefix (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:342:13)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:297:9\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:186:3)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/application.js:177:15)\n' +
        '    at Server.app (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/express.js:38:9)\n' +
        '    at Server.emit (node:events:519:28)\n' +
        '    at parserOnIncoming (node:_http_server:1173:12)\n' +
        '    at HTTPParser.parserOnHeadersComplete (node:_http_common:121:17)',
      timestamp: '2025-11-09T07:24:34.957Z',
      path: '/test/validation-error',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (node_modules/router/lib/route.js:132:14)
      at tests/with-mocks/errorHandler.mock.test.ts:45:5
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at jsonParser (node_modules/body-parser/lib/types/json.js:100:7)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.error
    Error: {
      message: 'Cast to ObjectId failed',
      statusCode: 400,
      stack: 'CastError: Cast to ObjectId failed\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/errorHandler.mock.test.ts:50:24\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:157:13)\n' +
        '    at Route.dispatch (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:117:3)\n' +
        '    at handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:435:11)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:295:15\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at jsonParser (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/body-parser/lib/types/json.js:100:7)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at trimPrefix (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:342:13)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:297:9\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:186:3)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/application.js:177:15)\n' +
        '    at Server.app (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/express.js:38:9)\n' +
        '    at Server.emit (node:events:519:28)\n' +
        '    at parserOnIncoming (node:_http_server:1173:12)\n' +
        '    at HTTPParser.parserOnHeadersComplete (node:_http_common:121:17)',
      timestamp: '2025-11-09T07:24:34.971Z',
      path: '/test/cast-error',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (node_modules/router/lib/route.js:132:14)
      at tests/with-mocks/errorHandler.mock.test.ts:54:5
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at jsonParser (node_modules/body-parser/lib/types/json.js:100:7)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.error
    Error: {
      message: 'E11000 duplicate key error',
      statusCode: 409,
      stack: 'MongoServerError: E11000 duplicate key error\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/errorHandler.mock.test.ts:59:24\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:157:13)\n' +
        '    at Route.dispatch (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:117:3)\n' +
        '    at handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:435:11)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:295:15\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at jsonParser (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/body-parser/lib/types/json.js:100:7)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at trimPrefix (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:342:13)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:297:9\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:186:3)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/application.js:177:15)\n' +
        '    at Server.app (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/express.js:38:9)\n' +
        '    at Server.emit (node:events:519:28)\n' +
        '    at parserOnIncoming (node:_http_server:1173:12)\n' +
        '    at HTTPParser.parserOnHeadersComplete (node:_http_common:121:17)',
      timestamp: '2025-11-09T07:24:34.979Z',
      path: '/test/duplicate-error',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (node_modules/router/lib/route.js:132:14)
      at tests/with-mocks/errorHandler.mock.test.ts:63:5
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at jsonParser (node_modules/body-parser/lib/types/json.js:100:7)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.error
    Error: {
      message: 'Something went wrong',
      statusCode: 500,
      stack: 'Error: Something went wrong\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/errorHandler.mock.test.ts:68:10\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:157:13)\n' +
        '    at Route.dispatch (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:117:3)\n' +
        '    at handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:435:11)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:295:15\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at jsonParser (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/body-parser/lib/types/json.js:100:7)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at trimPrefix (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:342:13)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:297:9\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:186:3)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/application.js:177:15)\n' +
        '    at Server.app (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/express.js:38:9)\n' +
        '    at Server.emit (node:events:519:28)\n' +
        '    at parserOnIncoming (node:_http_server:1173:12)\n' +
        '    at HTTPParser.parserOnHeadersComplete (node:_http_common:121:17)',
      timestamp: '2025-11-09T07:24:35.004Z',
      path: '/test/generic-error',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (node_modules/router/lib/route.js:132:14)
      at tests/with-mocks/errorHandler.mock.test.ts:68:5
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at jsonParser (node_modules/body-parser/lib/types/json.js:100:7)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.error
    Error: {
      message: '',
      statusCode: 500,
      stack: 'UnknownError: \n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/errorHandler.mock.test.ts:73:24\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:157:13)\n' +
        '    at Route.dispatch (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:117:3)\n' +
        '    at handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:435:11)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:295:15\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at jsonParser (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/body-parser/lib/types/json.js:100:7)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at trimPrefix (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:342:13)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:297:9\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:186:3)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/application.js:177:15)\n' +
        '    at Server.app (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/express.js:38:9)\n' +
        '    at Server.emit (node:events:519:28)\n' +
        '    at parserOnIncoming (node:_http_server:1173:12)\n' +
        '    at HTTPParser.parserOnHeadersComplete (node:_http_common:121:17)',
      timestamp: '2025-11-09T07:24:35.009Z',
      path: '/test/no-message-error',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (node_modules/router/lib/route.js:132:14)
      at tests/with-mocks/errorHandler.mock.test.ts:75:5
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at jsonParser (node_modules/body-parser/lib/types/json.js:100:7)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.error
    Error: {
      message: 'Error without name property',
      statusCode: 500,
      stack: undefined,
      timestamp: '2025-11-09T07:24:35.011Z',
      path: '/test/no-name-error',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (node_modules/router/lib/route.js:132:14)
      at tests/with-mocks/errorHandler.mock.test.ts:83:5
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at jsonParser (node_modules/body-parser/lib/types/json.js:100:7)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.error
    Error: {
      message: 'ECONNREFUSED',
      statusCode: 500,
      stack: 'Error: ECONNREFUSED\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/errorHandler.mock.test.ts:88:24\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:157:13)\n' +
        '    at Route.dispatch (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:117:3)\n' +
        '    at handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:435:11)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:295:15\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at jsonParser (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/body-parser/lib/types/json.js:100:7)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at trimPrefix (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:342:13)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:297:9\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:186:3)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/application.js:177:15)\n' +
        '    at Server.app (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/express.js:38:9)\n' +
        '    at Server.emit (node:events:519:28)\n' +
        '    at parserOnIncoming (node:_http_server:1173:12)\n' +
        '    at HTTPParser.parserOnHeadersComplete (node:_http_common:121:17)',
      timestamp: '2025-11-09T07:24:35.014Z',
      path: '/test/network-error',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (node_modules/router/lib/route.js:132:14)
      at tests/with-mocks/errorHandler.mock.test.ts:90:5
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at jsonParser (node_modules/body-parser/lib/types/json.js:100:7)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.error
    Error: {
      message: 'Something went wrong',
      statusCode: 500,
      stack: 'Error: Something went wrong\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/errorHandler.mock.test.ts:68:10\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:157:13)\n' +
        '    at Route.dispatch (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:117:3)\n' +
        '    at handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:435:11)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:295:15\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at jsonParser (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/body-parser/lib/types/json.js:100:7)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at trimPrefix (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:342:13)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:297:9\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:186:3)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/application.js:177:15)\n' +
        '    at Server.app (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/express.js:38:9)\n' +
        '    at Server.emit (node:events:519:28)\n' +
        '    at parserOnIncoming (node:_http_server:1173:12)\n' +
        '    at HTTPParser.parserOnHeadersComplete (node:_http_common:121:17)',
      timestamp: '2025-11-09T07:24:35.025Z',
      path: '/test/generic-error',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (node_modules/router/lib/route.js:132:14)
      at tests/with-mocks/errorHandler.mock.test.ts:68:5
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at jsonParser (node_modules/body-parser/lib/types/json.js:100:7)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.error
    Error: {
      message: 'Something went wrong',
      statusCode: 500,
      stack: 'Error: Something went wrong\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/errorHandler.mock.test.ts:68:10\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:157:13)\n' +
        '    at Route.dispatch (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:117:3)\n' +
        '    at handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:435:11)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:295:15\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at jsonParser (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/body-parser/lib/types/json.js:100:7)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at trimPrefix (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:342:13)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:297:9\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:186:3)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/application.js:177:15)\n' +
        '    at Server.app (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/express.js:38:9)\n' +
        '    at Server.emit (node:events:519:28)\n' +
        '    at parserOnIncoming (node:_http_server:1173:12)\n' +
        '    at HTTPParser.parserOnHeadersComplete (node:_http_common:121:17)',
      timestamp: '2025-11-09T07:24:35.028Z',
      path: '/test/generic-error',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (node_modules/router/lib/route.js:132:14)
      at tests/with-mocks/errorHandler.mock.test.ts:68:5
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at jsonParser (node_modules/body-parser/lib/types/json.js:100:7)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.error
    Error: {
      message: 'Validation failed',
      statusCode: 400,
      stack: 'ValidationError: Validation failed\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/errorHandler.mock.test.ts:38:24\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:157:13)\n' +
        '    at Route.dispatch (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:117:3)\n' +
        '    at handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:435:11)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:295:15\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at jsonParser (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/body-parser/lib/types/json.js:100:7)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at trimPrefix (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:342:13)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:297:9\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:186:3)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/application.js:177:15)\n' +
        '    at Server.app (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/express.js:38:9)\n' +
        '    at Server.emit (node:events:519:28)\n' +
        '    at parserOnIncoming (node:_http_server:1173:12)\n' +
        '    at HTTPParser.parserOnHeadersComplete (node:_http_common:121:17)',
      timestamp: '2025-11-09T07:24:35.031Z',
      path: '/test/validation-error',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (node_modules/router/lib/route.js:132:14)
      at tests/with-mocks/errorHandler.mock.test.ts:45:5
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at jsonParser (node_modules/body-parser/lib/types/json.js:100:7)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.error
    Error: {
      message: 'E11000 duplicate key error',
      statusCode: 409,
      stack: 'MongoServerError: E11000 duplicate key error\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/errorHandler.mock.test.ts:59:24\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:157:13)\n' +
        '    at Route.dispatch (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:117:3)\n' +
        '    at handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:435:11)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:295:15\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at jsonParser (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/body-parser/lib/types/json.js:100:7)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at trimPrefix (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:342:13)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:297:9\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:186:3)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/application.js:177:15)\n' +
        '    at Server.app (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/express.js:38:9)\n' +
        '    at Server.emit (node:events:519:28)\n' +
        '    at parserOnIncoming (node:_http_server:1173:12)\n' +
        '    at HTTPParser.parserOnHeadersComplete (node:_http_common:121:17)',
      timestamp: '2025-11-09T07:24:35.034Z',
      path: '/test/duplicate-error',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (node_modules/router/lib/route.js:132:14)
      at tests/with-mocks/errorHandler.mock.test.ts:63:5
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at jsonParser (node_modules/body-parser/lib/types/json.js:100:7)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.error
    Error: {
      message: 'Something went wrong',
      statusCode: 500,
      stack: 'Error: Something went wrong\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/errorHandler.mock.test.ts:68:10\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:157:13)\n' +
        '    at Route.dispatch (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:117:3)\n' +
        '    at handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:435:11)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:295:15\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at jsonParser (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/body-parser/lib/types/json.js:100:7)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at trimPrefix (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:342:13)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:297:9\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:186:3)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/application.js:177:15)\n' +
        '    at Server.app (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/express.js:38:9)\n' +
        '    at Server.emit (node:events:519:28)\n' +
        '    at parserOnIncoming (node:_http_server:1173:12)\n' +
        '    at HTTPParser.parserOnHeadersComplete (node:_http_common:121:17)',
      timestamp: '2025-11-09T07:24:35.036Z',
      path: '/test/generic-error',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (node_modules/router/lib/route.js:132:14)
      at tests/with-mocks/errorHandler.mock.test.ts:68:5
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at jsonParser (node_modules/body-parser/lib/types/json.js:100:7)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.error
    Error: {
      message: 'Cast to ObjectId failed',
      statusCode: 400,
      stack: 'CastError: Cast to ObjectId failed\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/errorHandler.mock.test.ts:50:24\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:157:13)\n' +
        '    at Route.dispatch (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:117:3)\n' +
        '    at handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:435:11)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:295:15\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at jsonParser (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/body-parser/lib/types/json.js:100:7)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at trimPrefix (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:342:13)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:297:9\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:186:3)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/application.js:177:15)\n' +
        '    at Server.app (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/express.js:38:9)\n' +
        '    at Server.emit (node:events:519:28)\n' +
        '    at parserOnIncoming (node:_http_server:1173:12)\n' +
        '    at HTTPParser.parserOnHeadersComplete (node:_http_common:121:17)',
      timestamp: '2025-11-09T07:24:35.040Z',
      path: '/test/cast-error',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (node_modules/router/lib/route.js:132:14)
      at tests/with-mocks/errorHandler.mock.test.ts:54:5
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at jsonParser (node_modules/body-parser/lib/types/json.js:100:7)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.error
    Error: {
      message: 'Error: aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa'... 7 more characters,
      statusCode: 500,
      stack: 'Error: Error: aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa'... 1687 more characters,
      timestamp: '2025-11-09T07:24:35.044Z',
      path: '/test/long-error',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (node_modules/router/lib/route.js:132:14)
      at tests/with-mocks/errorHandler.mock.test.ts:538:9
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.error
    Error: {
      message: `Error: <script>alert("xss")</script> & "quotes" 'apostrophe'`,
      statusCode: 500,
      stack: `Error: Error: <script>alert("xss")</script> & "quotes" 'apostrophe'\n` +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/errorHandler.mock.test.ts:558:14\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:157:13)\n' +
        '    at Route.dispatch (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:117:3)\n' +
        '    at handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:435:11)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:295:15\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:186:3)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/application.js:177:15)\n' +
        '    at Server.app (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/express.js:38:9)\n' +
        '    at Server.emit (node:events:519:28)\n' +
        '    at parserOnIncoming (node:_http_server:1173:12)\n' +
        '    at HTTPParser.parserOnHeadersComplete (node:_http_common:121:17)',
      timestamp: '2025-11-09T07:24:35.047Z',
      path: '/test/special-chars',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (node_modules/router/lib/route.js:132:14)
      at tests/with-mocks/errorHandler.mock.test.ts:558:9
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.error
    Error: {
      message: 'Cannot read property of undefined',
      statusCode: 500,
      stack: 'TypeError: Cannot read property of undefined\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/errorHandler.mock.test.ts:576:23\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:157:13)\n' +
        '    at Route.dispatch (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:117:3)\n' +
        '    at handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:435:11)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:295:15\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:186:3)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/application.js:177:15)\n' +
        '    at Server.app (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/express.js:38:9)\n' +
        '    at Server.emit (node:events:519:28)\n' +
        '    at parserOnIncoming (node:_http_server:1173:12)\n' +
        '    at HTTPParser.parserOnHeadersComplete (node:_http_common:121:17)',
      timestamp: '2025-11-09T07:24:35.054Z',
      path: '/test/type-error',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (node_modules/router/lib/route.js:132:14)
      at tests/with-mocks/errorHandler.mock.test.ts:577:9
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.error
    Error: {
      message: 'Variable is not defined',
      statusCode: 500,
      stack: 'ReferenceError: Variable is not defined\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/errorHandler.mock.test.ts:595:23\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:157:13)\n' +
        '    at Route.dispatch (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:117:3)\n' +
        '    at handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:435:11)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:295:15\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:186:3)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/application.js:177:15)\n' +
        '    at Server.app (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/express.js:38:9)\n' +
        '    at Server.emit (node:events:519:28)\n' +
        '    at parserOnIncoming (node:_http_server:1173:12)\n' +
        '    at HTTPParser.parserOnHeadersComplete (node:_http_common:121:17)',
      timestamp: '2025-11-09T07:24:35.057Z',
      path: '/test/reference-error',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (node_modules/router/lib/route.js:132:14)
      at tests/with-mocks/errorHandler.mock.test.ts:596:9
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.error
    Error: {
      message: 'PUT error',
      statusCode: 500,
      stack: 'Error: PUT error\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/errorHandler.mock.test.ts:644:14\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:157:13)\n' +
        '    at Route.dispatch (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:117:3)\n' +
        '    at handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:435:11)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:295:15\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/body-parser/lib/read.js:132:5\n' +
        '    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n' +
        '    at invokeCallback (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/raw-body/index.js:238:16)\n' +
        '    at done (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/raw-body/index.js:227:7)\n' +
        '    at IncomingMessage.onEnd (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/raw-body/index.js:287:7)\n' +
        '    at IncomingMessage.emit (node:events:519:28)\n' +
        '    at endReadableNT (node:internal/streams/readable:1698:12)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:90:21)',
      timestamp: '2025-11-09T07:24:35.068Z',
      path: '/test/put-error',
      method: 'PUT'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (node_modules/router/lib/route.js:132:14)
      at tests/with-mocks/errorHandler.mock.test.ts:644:9
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/body-parser/lib/read.js:132:5
      at invokeCallback (node_modules/raw-body/index.js:238:16)
      at done (node_modules/raw-body/index.js:227:7)
      at IncomingMessage.onEnd (node_modules/raw-body/index.js:287:7)

  console.error
    Error: {
      message: 'DELETE error',
      statusCode: 500,
      stack: 'Error: DELETE error\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/errorHandler.mock.test.ts:663:14\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:157:13)\n' +
        '    at Route.dispatch (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:117:3)\n' +
        '    at handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:435:11)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:295:15\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:186:3)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/application.js:177:15)\n' +
        '    at Server.app (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/express.js:38:9)\n' +
        '    at Server.emit (node:events:519:28)\n' +
        '    at parserOnIncoming (node:_http_server:1173:12)\n' +
        '    at HTTPParser.parserOnHeadersComplete (node:_http_common:121:17)',
      timestamp: '2025-11-09T07:24:35.071Z',
      path: '/test/delete-error',
      method: 'DELETE'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (node_modules/router/lib/route.js:132:14)
      at tests/with-mocks/errorHandler.mock.test.ts:663:9
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.log
    
    üßπ Cleaning up after tests...

      at Object.<anonymous> (tests/with-mocks/errorHandler.mock.test.ts:110:13)

  console.warn
    MongoDB disconnected. Attempting to reconnect...

      28 |
      29 |     mongoose.connection.on('disconnected', () => {
    > 30 |       console.warn('MongoDB disconnected. Attempting to reconnect...');
         |               ^
      31 |     });
      32 |
      33 |     mongoose.connection.on('reconnected', () => {

      at NativeConnection.<anonymous> (src/config/database.ts:30:15)
      at NativeConnection.set (node_modules/mongoose/lib/connection.js:145:12)
      at NativeConnection.onClose (node_modules/mongoose/lib/connection.js:1315:19)
      at NativeConnection._close (node_modules/mongoose/lib/connection.js:1264:12)
      at disconnectDatabase (src/config/database.ts:55:5)
      at Object.<anonymous> (tests/with-mocks/errorHandler.mock.test.ts:111:5)

  console.log
    MongoDB disconnected successfully

      at disconnectDatabase (src/config/database.ts:56:13)

  console.log
    ‚úÖ Cleanup complete.

      at Object.<anonymous> (tests/with-mocks/errorHandler.mock.test.ts:112:13)

  console.error
    Error: {
      message: 'Simulated controller failure',
      statusCode: 500,
      stack: 'Error: Simulated controller failure\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/errorHandler.mock.test.ts:693:15\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:157:13)\n' +
        '    at Route.dispatch (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:117:3)\n' +
        '    at handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:435:11)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:295:15\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at jsonParser (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/body-parser/lib/types/json.js:100:7)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at trimPrefix (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:342:13)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:297:9\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:186:3)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/application.js:177:15)\n' +
        '    at Server.app (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/express.js:38:9)\n' +
        '    at Server.emit (node:events:519:28)\n' +
        '    at parserOnIncoming (node:_http_server:1173:12)\n' +
        '    at HTTPParser.parserOnHeadersComplete (node:_http_common:121:17)',
      timestamp: '2025-11-09T07:24:35.077Z',
      path: '/test/controller-error',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (node_modules/router/lib/route.js:132:14)
      at tests/with-mocks/errorHandler.mock.test.ts:695:9
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at jsonParser (node_modules/body-parser/lib/types/json.js:100:7)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.error
    Error: {
      message: 'Route /test/non-existent-route not found',
      statusCode: 404,
      stack: 'AppError: Route /test/non-existent-route not found\n' +
        '    at notFoundHandler (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/errorHandler.ts:118:17)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at trimPrefix (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:342:13)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:297:9\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at jsonParser (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/body-parser/lib/types/json.js:100:7)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at trimPrefix (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:342:13)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:297:9\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:186:3)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/application.js:177:15)\n' +
        '    at Server.app (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/express.js:38:9)\n' +
        '    at Server.emit (node:events:519:28)\n' +
        '    at parserOnIncoming (node:_http_server:1173:12)\n' +
        '    at HTTPParser.parserOnHeadersComplete (node:_http_common:121:17)',
      timestamp: '2025-11-09T07:24:35.081Z',
      path: '/test/non-existent-route',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (src/middleware/errorHandler.ts:119:3)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at jsonParser (node_modules/body-parser/lib/types/json.js:100:7)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.error
    Error: {
      message: 'Async handler error',
      statusCode: 500,
      stack: 'Error: Async handler error\n' +
        '    at asyncRouteHandler (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/errorHandler.mock.test.ts:765:13)\n' +
        '    at fn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/errorHandler.ts:58:15)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/errorHandler.ts:62:6\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:157:13)\n' +
        '    at Route.dispatch (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:117:3)\n' +
        '    at handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:435:11)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:295:15\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at jsonParser (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/body-parser/lib/types/json.js:100:7)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at trimPrefix (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:342:13)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:297:9\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:186:3)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/application.js:177:15)\n' +
        '    at Server.app (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/express.js:38:9)\n' +
        '    at Server.emit (node:events:519:28)\n' +
        '    at parserOnIncoming (node:_http_server:1173:12)\n' +
        '    at HTTPParser.parserOnHeadersComplete (node:_http_common:121:17)',
      timestamp: '2025-11-09T07:24:35.085Z',
      path: '/test/async-error',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at next (node_modules/router/lib/route.js:132:14)
      at next (src/middleware/errorHandler.ts:60:9)

  console.log
    Test suite completed.

      at Object.<anonymous> (tests/setup.ts:14:11)

PASS tests/with-mocks/errorHandler.mock.test.ts
  Error Handler Middleware - All Error Types
    AppError - Custom Application Errors
      ‚úì should return 400 for custom AppError (27 ms)
      ‚úì should handle AppError with 404 status (5 ms)
      ‚úì should handle AppError with 403 status (6 ms)
      ‚úì should handle AppError with 409 status (3 ms)
      ‚úì should handle AppError with 401 status (4 ms)
    Mongoose ValidationError
      ‚úì should return 400 for Mongoose validation error (4 ms)
      ‚úì should handle real Mongoose validation error from User model (6 ms)
    Mongoose CastError
      ‚úì should return 400 for Mongoose CastError (8 ms)
      ‚úì should handle CastError from real User.findById with invalid ID (3 ms)
    MongoDB Duplicate Key Error (11000)
      ‚úì should return 409 for MongoDB duplicate key error (4 ms)
      ‚úì should handle real duplicate key error with User model (20 ms)
    Generic Errors
      ‚úì should return 500 for generic error (6 ms)
      ‚úì should return 500 with default message for error without message (4 ms)
      ‚úì should return 500 with "Error" fallback when error has no name property (2 ms)
    Network and Connection Errors
      ‚úì should handle network connection errors (3 ms)
      ‚úì should handle MongoDB connection errors (1 ms)
    Error Handler Response Format
      ‚úì should include timestamp in error logs (2 ms)
      ‚úì should include request path and method in error logs (4 ms)
      ‚úì should include stack trace in development mode (3 ms)
      ‚úì should NOT include stack trace in production mode (3 ms)
    Multiple Error Types in Sequence
      ‚úì should handle different error types correctly in sequence (11 ms)
    Edge Cases
      ‚úì should handle null error gracefully (2 ms)
      ‚úì should handle error with very long message (3 ms)
      ‚úì should handle error with special characters in message (3 ms)
      ‚úì should handle TypeError (7 ms)
      ‚úì should handle ReferenceError (2 ms)
    Error Handler with Different HTTP Methods
      ‚úì should handle POST request errors (7 ms)
      ‚úì should handle PUT request errors (4 ms)
      ‚úì should handle DELETE request errors (2 ms)
  Controller Error Forwarding - next(error) Coverage
    ‚úì should simulate controller calling next(error) (3 ms)
  notFoundHandler - 404 Handler
    ‚úì should create AppError with 404 when route not found (4 ms)
  asyncHandler - Async Error Wrapper
    ‚úì should catch errors from async route handlers (3 ms)
    ‚úì should pass through successful async route handlers (3 ms)

  console.log
    [dotenv@17.2.3] injecting env (3) from .env.test -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

      at _log (node_modules/dotenv/lib/main.js:142:11)

  console.log
    Starting test suite...

      at Object.<anonymous> (tests/setup.ts:9:11)

  console.log
    
    üöÄ Starting Group Tests (With Mocks - Failure Scenarios)...

      at Object.<anonymous> (tests/with-mocks/group.mock.test.ts:68:11)

  console.log
    MongoDB Atlas connected successfully

      at connectDatabase (src/config/database.ts:22:13)

  console.log
    ‚úÖ Test setup complete.

      at Object.<anonymous> (tests/with-mocks/group.mock.test.ts:71:11)

  console.error
    Error: {
      message: 'MongoNetworkError: connection refused',
      statusCode: 500,
      stack: 'Error: MongoNetworkError: connection refused\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/group.mock.test.ts:101:7)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:35.313Z',
      path: '/api/group/status',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at GroupController.next [as getGroupStatus] (src/controllers/group.controller.ts:36:7)
      at src/routes/group.routes.ts:14:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'MongoServerError: operation exceeded time limit',
      statusCode: 500,
      stack: 'Error: MongoServerError: operation exceeded time limit\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/group.mock.test.ts:132:7)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)',
      timestamp: '2025-11-09T07:24:35.339Z',
      path: '/api/group/status',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at GroupController.next [as getGroupStatus] (src/controllers/group.controller.ts:36:7)
      at src/routes/group.routes.ts:14:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'MongoServerSelectionError: server selection timed out',
      statusCode: 500,
      stack: 'Error: MongoServerSelectionError: server selection timed out\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/group.mock.test.ts:161:7)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)',
      timestamp: '2025-11-09T07:24:35.346Z',
      path: '/api/group/status',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at GroupController.next [as getGroupStatus] (src/controllers/group.controller.ts:36:7)
      at src/routes/group.routes.ts:14:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'MongoNetworkError: socket timeout',
      statusCode: 500,
      stack: 'Error: MongoNetworkError: socket timeout\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/group.mock.test.ts:188:7)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:35.351Z',
      path: '/api/group/vote/some-group-id',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at GroupController.next [as voteForRestaurant] (src/controllers/group.controller.ts:75:7)
      at src/routes/group.routes.ts:23:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'MongoServerError: write operation failed',
      statusCode: 500,
      stack: 'Error: MongoServerError: write operation failed\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/group.mock.test.ts:224:7)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)',
      timestamp: '2025-11-09T07:24:35.361Z',
      path: '/api/group/vote/691041b318efb0ac9f16829a',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at GroupController.next [as voteForRestaurant] (src/controllers/group.controller.ts:75:7)
      at src/routes/group.routes.ts:23:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Failed to emit vote update: Error: WebSocket connection closed
        at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/group.mock.test.ts:260:13)
        at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-mock/build/index.js:305:39
        at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-mock/build/index.js:312:13)
        at Object.mockConstructor [as emitVoteUpdate] (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-mock/build/index.js:102:19)
        at GroupService.emitVoteUpdate [as voteForRestaurant] (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/services/groupService.ts:97:21)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at GroupController.voteForRestaurant (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/controllers/group.controller.ts:59:22)
        at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/routes/group.routes.ts:23:3
        at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/errorHandler.ts:58:9

      103 |       );
      104 |     } catch (error) {
    > 105 |       console.error('Failed to emit vote update:', error);
          |               ^
      106 |       // Continue execution - socket failure shouldn't block voting
      107 |     }
      108 |

      at GroupService.error [as voteForRestaurant] (src/services/groupService.ts:105:15)
      at GroupController.voteForRestaurant (src/controllers/group.controller.ts:59:22)
      at src/routes/group.routes.ts:23:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Failed to send notification: Error: FirebaseError: service unavailable
        at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/group.mock.test.ts:297:7)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)

      147 |           );
      148 |         } catch (error) {
    > 149 |           console.error('Failed to send notification:', error);
          |                   ^
      150 |         }
      151 |
      152 |         console.log(`√¢≈ì‚Ä¶ Restaurant selected for group ${groupId}`);

      at GroupService.error [as voteForRestaurant] (src/services/groupService.ts:149:19)
      at GroupController.voteForRestaurant (src/controllers/group.controller.ts:59:22)
      at src/routes/group.routes.ts:23:3
      at src/middleware/errorHandler.ts:58:9

  console.log
    √¢≈ì‚Ä¶ Restaurant selected for group 691041b318efb0ac9f1682a3

      at GroupService.log [as voteForRestaurant] (src/services/groupService.ts:152:17)

  console.error
    Failed to send notification: Error: Request timeout
        at Timeout._onTimeout (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/group.mock.test.ts:342:33)
        at listOnTimeout (node:internal/timers:588:17)
        at processTimers (node:internal/timers:523:7)

      147 |           );
      148 |         } catch (error) {
    > 149 |           console.error('Failed to send notification:', error);
          |                   ^
      150 |         }
      151 |
      152 |         console.log(`√¢≈ì‚Ä¶ Restaurant selected for group ${groupId}`);

      at GroupService.error [as voteForRestaurant] (src/services/groupService.ts:149:19)
      at GroupController.voteForRestaurant (src/controllers/group.controller.ts:59:22)
      at src/routes/group.routes.ts:23:3
      at src/middleware/errorHandler.ts:58:9

  console.log
    √¢≈ì‚Ä¶ Restaurant selected for group 691041b318efb0ac9f1682a9

      at GroupService.log [as voteForRestaurant] (src/services/groupService.ts:152:17)

  console.error
    Error: {
      message: 'MongoNetworkError: connection lost',
      statusCode: 500,
      stack: 'Error: MongoNetworkError: connection lost\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/group.mock.test.ts:386:30)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)',
      timestamp: '2025-11-09T07:24:35.530Z',
      path: '/api/group/vote/691041b318efb0ac9f1682af',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at GroupController.next [as voteForRestaurant] (src/controllers/group.controller.ts:75:7)
      at src/routes/group.routes.ts:23:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'MongoNetworkError: no connection available',
      statusCode: 500,
      stack: 'Error: MongoNetworkError: no connection available\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/group.mock.test.ts:420:7)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:35.534Z',
      path: '/api/group/leave/some-group-id',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

  console.error
    Error: {
      message: 'MongoServerError: cursor timeout',
      statusCode: 500,
      stack: 'Error: MongoServerError: cursor timeout\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/group.mock.test.ts:450:7)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)',
      timestamp: '2025-11-09T07:24:35.543Z',
      path: '/api/group/leave/691041b318efb0ac9f1682b3',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

  console.error
    Error: {
      message: 'MongoServerError: disk full',
      statusCode: 500,
      stack: 'Error: MongoServerError: disk full\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/group.mock.test.ts:485:7)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)',
      timestamp: '2025-11-09T07:24:35.554Z',
      path: '/api/group/leave/691041b318efb0ac9f1682b6',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

  console.error
    Error: {
      message: 'MongoServerError: write operation failed',
      statusCode: 500,
      stack: 'Error: MongoServerError: write operation failed\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/group.mock.test.ts:520:7)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)',
      timestamp: '2025-11-09T07:24:35.567Z',
      path: '/api/group/leave/691041b318efb0ac9f1682bb',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

  console.error
    Error: {
      message: 'MongoNetworkError: connection closed',
      statusCode: 500,
      stack: 'Error: MongoNetworkError: connection closed\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/group.mock.test.ts:555:7)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)',
      timestamp: '2025-11-09T07:24:35.577Z',
      path: '/api/group/leave/691041b318efb0ac9f1682c1',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

  console.error
    Failed to emit member left: Error: Socket.IO error: transport closed
        at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/group.mock.test.ts:594:13)
        at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-mock/build/index.js:305:39
        at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-mock/build/index.js:312:13)
        at Object.mockConstructor [as emitMemberLeft] (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-mock/build/index.js:102:19)
        at GroupService.emitMemberLeft [as leaveGroup] (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/services/groupService.ts:201:23)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at GroupController.leaveGroup (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/controllers/group.controller.ts:88:7)
        at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/routes/group.routes.ts:32:3
        at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/errorHandler.ts:58:9

      206 |         );
      207 |       } catch (error) {
    > 208 |         console.error('Failed to emit member left:', error);
          |                 ^
      209 |       }
      210 |
      211 |       // Check if restaurant should be auto-selected (all remaining voted)

      at GroupService.error [as leaveGroup] (src/services/groupService.ts:208:17)
      at GroupController.leaveGroup (src/controllers/group.controller.ts:88:7)
      at src/routes/group.routes.ts:32:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Failed to send notification: Error: FirebaseError: messaging/server-unavailable
        at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/group.mock.test.ts:649:7)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)

      257 |             );
      258 |           } catch (error) {
    > 259 |             console.error('Failed to send notification:', error);
          |                     ^
      260 |           }
      261 |         }
      262 |       }

      at GroupService.error [as leaveGroup] (src/services/groupService.ts:259:21)
      at GroupController.leaveGroup (src/controllers/group.controller.ts:88:7)
      at src/routes/group.routes.ts:32:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'MongoServerError: replica set not available',
      statusCode: 500,
      stack: 'Error: MongoServerError: replica set not available\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/group.mock.test.ts:702:30)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)',
      timestamp: '2025-11-09T07:24:35.623Z',
      path: '/api/group/leave/691041b318efb0ac9f1682da',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

  console.error
    Failed to emit vote update: Error: Socket error
        at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/group.mock.test.ts:738:13)
        at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-mock/build/index.js:305:39
        at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-mock/build/index.js:312:13)
        at Object.mockConstructor [as emitVoteUpdate] (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-mock/build/index.js:102:19)
        at GroupService.emitVoteUpdate [as voteForRestaurant] (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/services/groupService.ts:97:21)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at GroupController.voteForRestaurant (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/controllers/group.controller.ts:59:22)
        at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/routes/group.routes.ts:23:3
        at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/errorHandler.ts:58:9

      103 |       );
      104 |     } catch (error) {
    > 105 |       console.error('Failed to emit vote update:', error);
          |               ^
      106 |       // Continue execution - socket failure shouldn't block voting
      107 |     }
      108 |

      at GroupService.error [as voteForRestaurant] (src/services/groupService.ts:105:15)
      at GroupController.voteForRestaurant (src/controllers/group.controller.ts:59:22)
      at src/routes/group.routes.ts:23:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Failed to emit restaurant selected: Error: Socket error
        at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/group.mock.test.ts:741:13)
        at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-mock/build/index.js:305:39
        at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-mock/build/index.js:312:13)
        at Object.mockConstructor [as emitRestaurantSelected] (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-mock/build/index.js:102:19)
        at GroupService.emitRestaurantSelected [as voteForRestaurant] (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/services/groupService.ts:124:25)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at GroupController.voteForRestaurant (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/controllers/group.controller.ts:59:22)
        at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/routes/group.routes.ts:23:3
        at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/errorHandler.ts:58:9

      129 |           );
      130 |         } catch (error) {
    > 131 |           console.error('Failed to emit restaurant selected:', error);
          |                   ^
      132 |         }
      133 |
      134 |         // // Send notifications

      at GroupService.error [as voteForRestaurant] (src/services/groupService.ts:131:19)
      at GroupController.voteForRestaurant (src/controllers/group.controller.ts:59:22)
      at src/routes/group.routes.ts:23:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Failed to send notification: Error: Firebase error
        at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/group.mock.test.ts:744:7)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)

      147 |           );
      148 |         } catch (error) {
    > 149 |           console.error('Failed to send notification:', error);
          |                   ^
      150 |         }
      151 |
      152 |         console.log(`√¢≈ì‚Ä¶ Restaurant selected for group ${groupId}`);

      at GroupService.error [as voteForRestaurant] (src/services/groupService.ts:149:19)
      at GroupController.voteForRestaurant (src/controllers/group.controller.ts:59:22)
      at src/routes/group.routes.ts:23:3
      at src/middleware/errorHandler.ts:58:9

  console.log
    √¢≈ì‚Ä¶ Restaurant selected for group 691041b318efb0ac9f1682e3

      at GroupService.log [as voteForRestaurant] (src/services/groupService.ts:152:17)

  console.error
    Error: {
      message: 'MongoNetworkError: network partition detected',
      statusCode: 500,
      stack: 'Error: MongoNetworkError: network partition detected\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/group.mock.test.ts:814:7)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)',
      timestamp: '2025-11-09T07:24:35.653Z',
      path: '/api/group/vote/691041b318efb0ac9f1682e9',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at GroupController.next [as voteForRestaurant] (src/controllers/group.controller.ts:75:7)
      at src/routes/group.routes.ts:23:3
      at src/middleware/errorHandler.ts:58:9

  console.log
    Test suite completed.

      at Object.<anonymous> (tests/setup.ts:14:11)

  console.log
    
    üßπ Cleaning up after tests...

      at Object.<anonymous> (tests/with-mocks/group.mock.test.ts:75:11)

  console.warn
    MongoDB disconnected. Attempting to reconnect...

      28 |
      29 |     mongoose.connection.on('disconnected', () => {
    > 30 |       console.warn('MongoDB disconnected. Attempting to reconnect...');
         |               ^
      31 |     });
      32 |
      33 |     mongoose.connection.on('reconnected', () => {

      at NativeConnection.<anonymous> (src/config/database.ts:30:15)
      at NativeConnection.set (node_modules/mongoose/lib/connection.js:145:12)
      at NativeConnection.onClose (node_modules/mongoose/lib/connection.js:1315:19)
      at NativeConnection._close (node_modules/mongoose/lib/connection.js:1264:12)
      at disconnectDatabase (src/config/database.ts:55:5)
      at Object.<anonymous> (tests/with-mocks/group.mock.test.ts:77:3)

  console.log
    MongoDB disconnected successfully

      at disconnectDatabase (src/config/database.ts:56:13)

  console.log
    ‚úÖ Cleanup complete.

      at Object.<anonymous> (tests/with-mocks/group.mock.test.ts:78:11)

PASS tests/with-mocks/group.mock.test.ts
  GET /api/group/status - External Failures
    ‚úì should return 500 when database connection fails during User.findById (29 ms)
    ‚úì should return 500 when database timeout occurs during Group.findById (17 ms)
    ‚úì should return 500 when MongoDB server is unavailable (6 ms)
  POST /api/group/vote/:groupId - External Failures
    ‚úì should return 500 when database fails during Group.findById (5 ms)
    ‚úì should return 500 when database fails during group.save() (10 ms)
    ‚úì should handle Socket.IO emission failure gracefully (17 ms)
    ‚úì should handle Firebase notification failure when restaurant selected (28 ms)
    ‚úì should handle Firebase timeout when sending notifications (115 ms)
    ‚úì should return 500 when second save() fails during restaurant selection (10 ms)
  POST /api/group/leave/:groupId - External Failures
    ‚úì should return 500 when database fails during Group.findById (4 ms)
    ‚úì should return 500 when database fails during User.findById (8 ms)
    ‚úì should return 500 when user.save() fails (11 ms)
    ‚úì should return 500 when Group.findByIdAndDelete fails (empty group) (14 ms)
    ‚úì should return 500 when group.save() fails (non-empty group) (9 ms)
    ‚úì should handle Socket.IO emission failure when member leaves (14 ms)
    ‚úì should handle Firebase failure when notifying after auto-selection (18 ms)
    ‚úì should return 500 when auto-selection save fails (15 ms)
  Edge Case: Multiple Simultaneous Failures
    ‚úì should handle cascade of failures gracefully (12 ms)
  Network Timeout Scenarios
    ‚úì should handle database query timeout (2 ms)
    ‚úì should handle network partition during write (15 ms)

  console.log
    [dotenv@17.2.3] injecting env (3) from .env.test -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

      at _log (node_modules/dotenv/lib/main.js:142:11)

  console.log
    Starting test suite...

      at Object.<anonymous> (tests/setup.ts:9:11)

  console.error
    Error: {
      message: 'User not found',
      statusCode: 500,
      stack: 'Error: User not found\n' +
        '    at MatchingService.joinMatching (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/services/matchingService.ts:88:13)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at MatchingController.joinMatching (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/controllers/matching.controller.ts:17:22)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/routes/matching.routes.ts:14:3\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/errorHandler.ts:58:9',
      timestamp: '2025-11-09T07:24:35.969Z',
      path: '/api/matching/join',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at MatchingController.next [as joinMatching] (src/controllers/matching.controller.ts:29:7)
      at src/routes/matching.routes.ts:14:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'Database connection lost',
      statusCode: 500,
      stack: 'Error: Database connection lost\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/matching.mock.test.ts:157:43)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:35.979Z',
      path: '/api/matching/join',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at MatchingController.next [as joinMatching] (src/controllers/matching.controller.ts:29:7)
      at src/routes/matching.routes.ts:14:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'User is already in a room or group',
      statusCode: 500,
      stack: 'Error: User is already in a room or group\n' +
        '    at MatchingService.joinMatching (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/services/matchingService.ts:93:13)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at MatchingController.joinMatching (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/controllers/matching.controller.ts:17:22)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/routes/matching.routes.ts:14:3\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/errorHandler.ts:58:9',
      timestamp: '2025-11-09T07:24:35.988Z',
      path: '/api/matching/join',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at MatchingController.next [as joinMatching] (src/controllers/matching.controller.ts:29:7)
      at src/routes/matching.routes.ts:14:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'Query timeout',
      statusCode: 500,
      stack: 'Error: Query timeout\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/matching.mock.test.ts:242:39)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:35.992Z',
      path: '/api/matching/join',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at MatchingController.next [as joinMatching] (src/controllers/matching.controller.ts:29:7)
      at src/routes/matching.routes.ts:14:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'Failed to create room',
      statusCode: 500,
      stack: 'Error: Failed to create room\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/matching.mock.test.ts:290:41)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:35.995Z',
      path: '/api/matching/join',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at MatchingController.next [as joinMatching] (src/controllers/matching.controller.ts:29:7)
      at src/routes/matching.routes.ts:14:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'Cast to ObjectId failed',
      statusCode: 400,
      stack: 'CastError: Cast to ObjectId failed\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/matching.mock.test.ts:323:23)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:35.998Z',
      path: '/api/matching/join',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at MatchingController.next [as joinMatching] (src/controllers/matching.controller.ts:29:7)
      at src/routes/matching.routes.ts:14:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'Validation failed: budget must be positive',
      statusCode: 400,
      stack: 'ValidationError: Validation failed: budget must be positive\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/matching.mock.test.ts:361:29)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.001Z',
      path: '/api/matching/join',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at MatchingController.next [as joinMatching] (src/controllers/matching.controller.ts:29:7)
      at src/routes/matching.routes.ts:14:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'User not found',
      statusCode: 500,
      stack: 'Error: User not found\n' +
        '    at MatchingService.leaveRoom (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/services/matchingService.ts:197:13)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at MatchingController.leaveRoom (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/controllers/matching.controller.ts:68:7)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/routes/matching.routes.ts:32:3\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/errorHandler.ts:58:9',
      timestamp: '2025-11-09T07:24:36.004Z',
      path: '/api/matching/leave/691041b4cd03c89133938022',
      method: 'PUT'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at MatchingController.next [as leaveRoom] (src/controllers/matching.controller.ts:76:7)
      at src/routes/matching.routes.ts:32:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'Database timeout',
      statusCode: 500,
      stack: 'Error: Database timeout\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/matching.mock.test.ts:457:43)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.006Z',
      path: '/api/matching/leave/room-123',
      method: 'PUT'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at MatchingController.next [as leaveRoom] (src/controllers/matching.controller.ts:76:7)
      at src/routes/matching.routes.ts:32:3
      at src/middleware/errorHandler.ts:58:9

  console.log
    Room non-existent-room not found - clearing user's roomID anyway

      at MatchingService.log [as leaveRoom] (src/services/matchingService.ts:204:15)

  console.log
    ‚úÖ Cleared stale roomID for user test-user-123

      at MatchingService.log [as leaveRoom] (src/services/matchingService.ts:211:17)

  console.error
    Error: {
      message: 'Failed to update room',
      statusCode: 500,
      stack: 'Error: Failed to update room\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/matching.mock.test.ts:553:41)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.013Z',
      path: '/api/matching/leave/room-123',
      method: 'PUT'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at MatchingController.next [as leaveRoom] (src/controllers/matching.controller.ts:76:7)
      at src/routes/matching.routes.ts:32:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'Delete failed',
      statusCode: 500,
      stack: 'Error: Delete failed\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/matching.mock.test.ts:610:52)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.015Z',
      path: '/api/matching/leave/room-123',
      method: 'PUT'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at MatchingController.next [as leaveRoom] (src/controllers/matching.controller.ts:76:7)
      at src/routes/matching.routes.ts:32:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'Room not found',
      statusCode: 500,
      stack: 'Error: Room not found\n' +
        '    at MatchingService.getRoomStatus (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/services/matchingService.ts:321:13)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at MatchingController.getRoomStatus (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/controllers/matching.controller.ts:88:22)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/routes/matching.routes.ts:41:3\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/errorHandler.ts:58:9',
      timestamp: '2025-11-09T07:24:36.018Z',
      path: '/api/matching/status/691041b4cd03c89133938023',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at MatchingController.next [as getRoomStatus] (src/controllers/matching.controller.ts:96:7)
      at src/routes/matching.routes.ts:41:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'Connection refused',
      statusCode: 500,
      stack: 'Error: Connection refused\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/matching.mock.test.ts:686:43)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.020Z',
      path: '/api/matching/status/691041b4cd03c89133938024',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at MatchingController.next [as getRoomStatus] (src/controllers/matching.controller.ts:96:7)
      at src/routes/matching.routes.ts:41:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'Cast to ObjectId failed',
      statusCode: 400,
      stack: 'CastError: Cast to ObjectId failed\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/matching.mock.test.ts:718:23)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.022Z',
      path: '/api/matching/status/invalid-id-format',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at MatchingController.next [as getRoomStatus] (src/controllers/matching.controller.ts:96:7)
      at src/routes/matching.routes.ts:41:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'Room not found',
      statusCode: 500,
      stack: 'Error: Room not found\n' +
        '    at MatchingService.getRoomUsers (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/services/matchingService.ts:339:13)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at MatchingController.getRoomUsers (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/controllers/matching.controller.ts:108:21)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/routes/matching.routes.ts:50:3\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/errorHandler.ts:58:9',
      timestamp: '2025-11-09T07:24:36.027Z',
      path: '/api/matching/users/691041b4cd03c89133938025',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

  console.error
    Error: {
      message: 'Network error',
      statusCode: 500,
      stack: 'Error: Network error\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/matching.mock.test.ts:796:43)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.029Z',
      path: '/api/matching/users/691041b4cd03c89133938026',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

  console.log
    Test suite completed.

      at Object.<anonymous> (tests/setup.ts:14:11)

PASS tests/with-mocks/matching.mock.test.ts
  POST /api/matching/join - With Mocking
    ‚úì should return 500 when user not found in database (23 ms)
    ‚úì should return 500 when database connection fails (14 ms)
    ‚úì should return 500 when user already in room (3 ms)
    ‚úì should return 500 when Room.find() fails (4 ms)
    ‚úì should return 500 when Room.create() fails (3 ms)
    ‚úì should return 400 when invalid ObjectId format (3 ms)
    ‚úì should return 400 when user.save() fails with ValidationError (2 ms)
  PUT /api/matching/leave/:roomId - With Mocking
    ‚úì should return 500 when user not found (3 ms)
    ‚úì should return 500 when Room.findById() fails (2 ms)
    ‚úì should handle gracefully when room not found (cleanup stale state) (4 ms)
    ‚úì should return 500 when room.save() fails (2 ms)
    ‚úì should return 500 when Room.findByIdAndDelete() fails (2 ms)
  GET /api/matching/status/:roomId - With Mocking
    ‚úì should return 500 when room not found (2 ms)
    ‚úì should return 500 when database query fails (2 ms)
    ‚úì should return 400 for invalid ObjectId format (4 ms)
  GET /api/matching/users/:roomId - With Mocking
    ‚úì should return 500 when room not found (3 ms)
    ‚úì should return 500 when database connection fails (2 ms)

  console.log
    [dotenv@17.2.3] injecting env (3) from .env.test -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

  console.log
    Starting test suite...

      at Object.<anonymous> (tests/setup.ts:9:11)

  console.log
    
    üöÄ Starting Auth Tests (With Mocks - Uncontrollable Failures)...

      at Object.<anonymous> (tests/with-mocks/auth.mock.test.ts:31:11)

  console.log
    MongoDB Atlas connected successfully

      at connectDatabase (src/config/database.ts:22:13)

  console.log
    ‚úÖ Test setup complete.

      at Object.<anonymous> (tests/with-mocks/auth.mock.test.ts:34:11)

  console.error
    Error: {
      message: 'MongoNetworkError: connection lost',
      statusCode: 500,
      stack: 'Error: MongoNetworkError: connection lost\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/auth.mock.test.ts:51:7)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.267Z',
      path: '/api/auth/logout',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at AuthController.next [as logout] (src/controllers/auth.controller.ts:274:7)

  console.error
    Error: {
      message: 'MongoServerError: write failed',
      statusCode: 500,
      stack: 'Error: MongoServerError: write failed\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/auth.mock.test.ts:72:41)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.273Z',
      path: '/api/auth/logout',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at AuthController.next [as logout] (src/controllers/auth.controller.ts:274:7)

  console.error
    Error: {
      message: 'MongoServerError: operation exceeded time limit',
      statusCode: 500,
      stack: 'Error: MongoServerError: operation exceeded time limit\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/auth.mock.test.ts:93:7)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.276Z',
      path: '/api/auth/logout',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at AuthController.next [as logout] (src/controllers/auth.controller.ts:274:7)

  console.error
    Error: {
      message: 'MongoNetworkError: network partition detected',
      statusCode: 500,
      stack: 'Error: MongoNetworkError: network partition detected\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/auth.mock.test.ts:112:7)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.279Z',
      path: '/api/auth/logout',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at AuthController.next [as logout] (src/controllers/auth.controller.ts:274:7)

  console.error
    Error: {
      message: 'MongoNetworkError: connection refused',
      statusCode: 500,
      stack: 'Error: MongoNetworkError: connection refused\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/auth.mock.test.ts:133:7)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.281Z',
      path: '/api/auth/verify',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

  console.error
    Error: {
      message: 'MongoServerSelectionError: server selection timed out',
      statusCode: 500,
      stack: 'Error: MongoServerSelectionError: server selection timed out\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/auth.mock.test.ts:152:7)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.284Z',
      path: '/api/auth/verify',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

  console.error
    Error: {
      message: 'MongoServerError: replica set not available',
      statusCode: 500,
      stack: 'Error: MongoServerError: replica set not available\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/auth.mock.test.ts:171:7)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.289Z',
      path: '/api/auth/verify',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

  console.error
    Error: {
      message: 'MongoNetworkError: socket closed',
      statusCode: 500,
      stack: 'Error: MongoNetworkError: socket closed\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/auth.mock.test.ts:192:7)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.293Z',
      path: '/api/auth/fcm-token',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at AuthController.next [as updateFCMToken] (src/controllers/auth.controller.ts:358:7)

  console.error
    Error: {
      message: 'MongoServerError: disk full',
      statusCode: 500,
      stack: 'Error: MongoServerError: disk full\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/auth.mock.test.ts:214:41)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.296Z',
      path: '/api/auth/fcm-token',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at AuthController.next [as updateFCMToken] (src/controllers/auth.controller.ts:358:7)

  console.error
    Error: {
      message: 'MongoNetworkError: network partition detected',
      statusCode: 500,
      stack: 'Error: MongoNetworkError: network partition detected\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/auth.mock.test.ts:236:7)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.299Z',
      path: '/api/auth/fcm-token',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at AuthController.next [as updateFCMToken] (src/controllers/auth.controller.ts:358:7)

  console.error
    Error: {
      message: 'MongoServerError: cursor timeout',
      statusCode: 500,
      stack: 'Error: MongoServerError: cursor timeout\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/auth.mock.test.ts:256:7)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.302Z',
      path: '/api/auth/fcm-token',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at AuthController.next [as updateFCMToken] (src/controllers/auth.controller.ts:358:7)

  console.error
    Error: {
      message: 'MongoNetworkError: no connection available',
      statusCode: 500,
      stack: 'Error: MongoNetworkError: no connection available\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/auth.mock.test.ts:278:7)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.304Z',
      path: '/api/auth/account',
      method: 'DELETE'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at AuthController.next [as deleteAccount] (src/controllers/auth.controller.ts:400:7)

  console.error
    Error: {
      message: 'MongoServerError: delete operation failed',
      statusCode: 500,
      stack: 'Error: MongoServerError: delete operation failed\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/auth.mock.test.ts:304:7)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.306Z',
      path: '/api/auth/account',
      method: 'DELETE'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at AuthController.next [as deleteAccount] (src/controllers/auth.controller.ts:400:7)

  console.error
    Error: {
      message: 'MongoServerError: replica set not available',
      statusCode: 500,
      stack: 'Error: MongoServerError: replica set not available\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/auth.mock.test.ts:323:7)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.308Z',
      path: '/api/auth/account',
      method: 'DELETE'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at AuthController.next [as deleteAccount] (src/controllers/auth.controller.ts:400:7)

  console.error
    Error: {
      message: 'MongoNetworkError: connection closed',
      statusCode: 500,
      stack: 'Error: MongoNetworkError: connection closed\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/auth.mock.test.ts:342:7)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.310Z',
      path: '/api/auth/account',
      method: 'DELETE'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at AuthController.next [as deleteAccount] (src/controllers/auth.controller.ts:400:7)

  console.error
    Error: {
      message: 'MongoServerError: operation exceeded time limit',
      statusCode: 500,
      stack: 'Error: MongoServerError: operation exceeded time limit\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/auth.mock.test.ts:363:7)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.313Z',
      path: '/api/auth/logout',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at AuthController.next [as logout] (src/controllers/auth.controller.ts:274:7)

  console.error
    Error: {
      message: 'MongoServerError: cursor timeout',
      statusCode: 500,
      stack: 'Error: MongoServerError: cursor timeout\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/auth.mock.test.ts:382:7)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.315Z',
      path: '/api/auth/verify',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

  console.error
    Error: {
      message: 'MongoServerError: connection pool exhausted',
      statusCode: 500,
      stack: 'Error: MongoServerError: connection pool exhausted\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/auth.mock.test.ts:401:7)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.319Z',
      path: '/api/auth/logout',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at AuthController.next [as logout] (src/controllers/auth.controller.ts:274:7)

  console.log
    Test suite completed.

      at Object.<anonymous> (tests/setup.ts:14:11)

  console.log
    
    üßπ Cleaning up after tests...

      at Object.<anonymous> (tests/with-mocks/auth.mock.test.ts:38:11)

  console.warn
    MongoDB disconnected. Attempting to reconnect...

      28 |
      29 |     mongoose.connection.on('disconnected', () => {
    > 30 |       console.warn('MongoDB disconnected. Attempting to reconnect...');
         |               ^
      31 |     });
      32 |
      33 |     mongoose.connection.on('reconnected', () => {

      at NativeConnection.<anonymous> (src/config/database.ts:30:15)
      at NativeConnection.set (node_modules/mongoose/lib/connection.js:145:12)
      at NativeConnection.onClose (node_modules/mongoose/lib/connection.js:1315:19)
      at NativeConnection._close (node_modules/mongoose/lib/connection.js:1264:12)
      at disconnectDatabase (src/config/database.ts:55:5)
      at Object.<anonymous> (tests/with-mocks/auth.mock.test.ts:40:3)

  console.log
    MongoDB disconnected successfully

      at disconnectDatabase (src/config/database.ts:56:13)

  console.log
    ‚úÖ Cleanup complete.

      at Object.<anonymous> (tests/with-mocks/auth.mock.test.ts:41:11)

PASS tests/with-mocks/auth.mock.test.ts
  POST /api/auth/logout - Database Failures
    ‚úì should return 500 when User.findById() fails (11 ms)
    ‚úì should return 500 when user.save() fails (4 ms)
    ‚úì should return 500 when database timeout occurs (3 ms)
    ‚úì should return 500 when network partition occurs (2 ms)
  GET /api/auth/verify - Database Failures
    ‚úì should return 500 when User.findById() fails (3 ms)
    ‚úì should return 500 when database timeout occurs (5 ms)
    ‚úì should return 500 when replica set fails (2 ms)
  POST /api/auth/fcm-token - Database Failures
    ‚úì should return 500 when User.findById() fails (5 ms)
    ‚úì should return 500 when user.save() fails (2 ms)
    ‚úì should return 500 when network partition occurs (3 ms)
    ‚úì should return 500 when cursor timeout occurs (3 ms)
  DELETE /api/auth/account - Database Failures
    ‚úì should return 500 when User.findById() fails (2 ms)
    ‚úì should return 500 when User.findByIdAndDelete() fails (2 ms)
    ‚úì should return 500 when replica set is unavailable (2 ms)
    ‚úì should return 500 when database connection is lost (2 ms)
  Network Timeout Scenarios
    ‚úì should handle database query timeout in logout (2 ms)
    ‚úì should handle cursor timeout in verify (1 ms)
    ‚úì should handle connection pool exhaustion (4 ms)

  console.log
    [dotenv@17.2.3] injecting env (3) from .env.test -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

      at _log (node_modules/dotenv/lib/main.js:142:11)

  console.log
    Starting test suite...

      at Object.<anonymous> (tests/setup.ts:9:11)

  console.error
    Error: {
      message: 'Database connection failed',
      statusCode: 500,
      stack: 'Error: Database connection failed\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/user.mock.test.ts:51:39)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.553Z',
      path: '/api/user/profile/user123',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at UserController.next [as getUserProfiles] (src/controllers/user.controller.ts:26:7)
      at src/routes/user.routes.ts:14:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'Cast to ObjectId failed',
      statusCode: 400,
      stack: 'CastError: Cast to ObjectId failed\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/user.mock.test.ts:75:23)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.564Z',
      path: '/api/user/profile/invalid-id',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at UserController.next [as getUserProfiles] (src/controllers/user.controller.ts:26:7)
      at src/routes/user.routes.ts:14:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'Operation timed out',
      statusCode: 500,
      stack: 'Error: Operation timed out\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/user.mock.test.ts:101:39)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.566Z',
      path: '/api/user/profile/user123',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at UserController.next [as getUserProfiles] (src/controllers/user.controller.ts:26:7)
      at src/routes/user.routes.ts:14:3
      at src/middleware/errorHandler.ts:58:9

  console.log
    [UserService] getUserSettings called for userId: test-user-id-123

      at UserService.log [as getUserSettings] (src/services/userService.ts:55:13)

  console.error
    Error: {
      message: 'User not found',
      statusCode: 500,
      stack: 'Error: User not found\n' +
        '    at UserService.getUserSettings (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/services/userService.ts:60:13)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at UserController.getUserSettings (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/controllers/user.controller.ts:38:24)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/routes/user.routes.ts:23:3\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/errorHandler.ts:58:9',
      timestamp: '2025-11-09T07:24:36.579Z',
      path: '/api/user/settings',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at UserController.next [as getUserSettings] (src/controllers/user.controller.ts:46:7)
      at src/routes/user.routes.ts:23:3
      at src/middleware/errorHandler.ts:58:9

  console.log
    [UserService] getUserSettings called for userId: test-user-id-123

      at UserService.log [as getUserSettings] (src/services/userService.ts:55:13)

  console.error
    Error: {
      message: 'Connection lost',
      statusCode: 500,
      stack: 'Error: Connection lost\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/user.mock.test.ts:185:43)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.583Z',
      path: '/api/user/settings',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at UserController.next [as getUserSettings] (src/controllers/user.controller.ts:46:7)
      at src/routes/user.routes.ts:23:3
      at src/middleware/errorHandler.ts:58:9

  console.log
    [UserService] getUserSettings called for userId: invalid-format

      at UserService.log [as getUserSettings] (src/services/userService.ts:55:13)

  console.error
    Error: {
      message: 'Invalid ObjectId',
      statusCode: 400,
      stack: 'CastError: Invalid ObjectId\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/user.mock.test.ts:211:23)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.587Z',
      path: '/api/user/settings',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at UserController.next [as getUserSettings] (src/controllers/user.controller.ts:46:7)
      at src/routes/user.routes.ts:23:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'User not found',
      statusCode: 500,
      stack: 'Error: User not found\n' +
        '    at UserService.createUserProfile (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/services/userService.ts:96:13)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at UserController.createUserProfile (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/controllers/user.controller.ts:60:23)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/routes/user.routes.ts:32:3\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/errorHandler.ts:58:9',
      timestamp: '2025-11-09T07:24:36.591Z',
      path: '/api/user/profile',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at UserController.next [as createUserProfile] (src/controllers/user.controller.ts:73:7)
      at src/routes/user.routes.ts:32:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'Write failed',
      statusCode: 500,
      stack: 'Error: Write failed\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/user.mock.test.ts:285:41)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.595Z',
      path: '/api/user/profile',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at UserController.next [as createUserProfile] (src/controllers/user.controller.ts:73:7)
      at src/routes/user.routes.ts:32:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'Validation failed: name is required',
      statusCode: 400,
      stack: 'ValidationError: Validation failed: name is required\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/user.mock.test.ts:317:29)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.597Z',
      path: '/api/user/profile',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at UserController.next [as createUserProfile] (src/controllers/user.controller.ts:73:7)
      at src/routes/user.routes.ts:32:3
      at src/middleware/errorHandler.ts:58:9

  console.log
    [UserService] updateUserSettings called for userId: test-user-id-123

      at UserService.log [as updateUserSettings] (src/services/userService.ts:130:13)

  console.log
    [UserService] Data received: {
      name: undefined,
      bio: undefined,
      preference: undefined,
      profilePicture: undefined,
      contactNumber: undefined,
      budget: 50,
      radiusKm: undefined
    }

      at UserService.log [as updateUserSettings] (src/services/userService.ts:131:13)

  console.error
    Error: {
      message: 'User not found',
      statusCode: 500,
      stack: 'Error: User not found\n' +
        '    at UserService.updateUserSettings (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/services/userService.ts:136:13)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at UserController.updateUserSettings (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/controllers/user.controller.ts:87:24)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/routes/user.routes.ts:41:3\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/errorHandler.ts:58:9',
      timestamp: '2025-11-09T07:24:36.602Z',
      path: '/api/user/settings',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at UserController.next [as updateUserSettings] (src/controllers/user.controller.ts:103:7)
      at src/routes/user.routes.ts:41:3
      at src/middleware/errorHandler.ts:58:9

  console.log
    [UserService] updateUserSettings called for userId: test-user-id-123

      at UserService.log [as updateUserSettings] (src/services/userService.ts:130:13)

  console.log
    [UserService] Data received: {
      name: undefined,
      bio: undefined,
      preference: undefined,
      profilePicture: undefined,
      contactNumber: undefined,
      budget: 100,
      radiusKm: undefined
    }

      at UserService.log [as updateUserSettings] (src/services/userService.ts:131:13)

  console.error
    Error: {
      message: 'Database write error',
      statusCode: 500,
      stack: 'Error: Database write error\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/user.mock.test.ts:394:41)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.607Z',
      path: '/api/user/settings',
      method: 'POST'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at UserController.next [as updateUserSettings] (src/controllers/user.controller.ts:103:7)
      at src/routes/user.routes.ts:41:3
      at src/middleware/errorHandler.ts:58:9

  console.log
    [UserService] updateUserSettings called for userId: test-user-id-123

      at UserService.log [as updateUserSettings] (src/services/userService.ts:130:13)

  console.log
    [UserService] Data received: {
      name: undefined,
      bio: undefined,
      preference: undefined,
      profilePicture: 'https://lh3.googleusercontent.com/test',
      contactNumber: undefined,
      budget: undefined,
      radiusKm: undefined
    }

      at UserService.log [as updateUserSettings] (src/services/userService.ts:131:13)

  console.log
    [UserService] Updating profilePicture from "" to "https://lh3.googleusercontent.com/test"

      at UserService.log [as updateUserSettings] (src/services/userService.ts:143:15)

  console.log
    [UserService] Converting Google profile picture to Base64: https://lh3.googleusercontent.com/test

      at UserService.log [as convertGoogleProfilePictureToBase64] (src/services/userService.ts:15:15)

  console.error
    [UserService] Failed to convert profile picture to Base64: Error: Network error
        at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/user.mock.test.ts:426:39)
        at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)
        at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)
        at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7
        at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)
        at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)
        at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)
        at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)
        at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)
        at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)
        at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)

      29 |       return base64DataUri;
      30 |     } catch (error) {
    > 31 |       console.error(`[UserService] Failed to convert profile picture to Base64:`, error);
         |               ^
      32 |       return profilePictureUrl; // Return original URL if conversion fails
      33 |     }
      34 |   }

      at UserService.error [as convertGoogleProfilePictureToBase64] (src/services/userService.ts:31:15)
      at UserService.updateUserSettings (src/services/userService.ts:146:39)
      at UserController.updateUserSettings (src/controllers/user.controller.ts:87:24)
      at src/routes/user.routes.ts:41:3
      at src/middleware/errorHandler.ts:58:9

  console.log
    [UserService] User saved. Current profilePicture: "https://lh3.googleusercontent.com/test"

      at UserService.log [as updateUserSettings] (src/services/userService.ts:154:13)

  console.log
    [UserService] getUserSettings called for userId: test-user-id-123

      at UserService.log [as getUserSettings] (src/services/userService.ts:55:13)

  console.log
    [UserService] User found. profilePicture: "https://lh3.googleusercontent.com/test"

      at UserService.log [as getUserSettings] (src/services/userService.ts:63:13)

  console.error
    Error: {
      message: 'User not found',
      statusCode: 500,
      stack: 'Error: User not found\n' +
        '    at UserService.updateUserProfile (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/services/userService.ts:177:13)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at UserController.updateUserProfile (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/controllers/user.controller.ts:117:23)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/routes/user.routes.ts:50:3\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/errorHandler.ts:58:9',
      timestamp: '2025-11-09T07:24:36.614Z',
      path: '/api/user/profile',
      method: 'PUT'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at UserController.next [as updateUserProfile] (src/controllers/user.controller.ts:133:7)
      at src/routes/user.routes.ts:50:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'Update failed',
      statusCode: 500,
      stack: 'Error: Update failed\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/user.mock.test.ts:507:41)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.617Z',
      path: '/api/user/profile',
      method: 'PUT'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at UserController.next [as updateUserProfile] (src/controllers/user.controller.ts:133:7)
      at src/routes/user.routes.ts:50:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'Invalid field',
      statusCode: 400,
      stack: 'ValidationError: Invalid field\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/user.mock.test.ts:537:29)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.620Z',
      path: '/api/user/profile',
      method: 'PUT'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at UserController.next [as updateUserProfile] (src/controllers/user.controller.ts:133:7)
      at src/routes/user.routes.ts:50:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'User not found',
      statusCode: 500,
      stack: 'Error: User not found\n' +
        '    at UserService.deleteUser (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/services/userService.ts:210:13)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at UserController.deleteUser (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/controllers/user.controller.ts:156:22)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/routes/user.routes.ts:59:3\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/errorHandler.ts:58:9',
      timestamp: '2025-11-09T07:24:36.622Z',
      path: '/api/user/test-user-id-123',
      method: 'DELETE'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

  console.error
    Error: {
      message: 'Cannot delete account while in a room or group',
      statusCode: 500,
      stack: 'Error: Cannot delete account while in a room or group\n' +
        '    at UserService.deleteUser (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/services/userService.ts:214:13)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at UserController.deleteUser (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/controllers/user.controller.ts:156:22)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/routes/user.routes.ts:59:3\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/errorHandler.ts:58:9',
      timestamp: '2025-11-09T07:24:36.624Z',
      path: '/api/user/user-in-room',
      method: 'DELETE'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

  console.error
    Error: {
      message: 'Cannot delete account while in a room or group',
      statusCode: 500,
      stack: 'Error: Cannot delete account while in a room or group\n' +
        '    at UserService.deleteUser (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/services/userService.ts:214:13)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at UserController.deleteUser (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/controllers/user.controller.ts:156:22)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/routes/user.routes.ts:59:3\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/errorHandler.ts:58:9',
      timestamp: '2025-11-09T07:24:36.627Z',
      path: '/api/user/user-in-group',
      method: 'DELETE'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

  console.error
    Error: {
      message: 'Delete operation failed',
      statusCode: 500,
      stack: 'Error: Delete operation failed\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/user.mock.test.ts:683:52)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.633Z',
      path: '/api/user/test-user-id-123',
      method: 'DELETE'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

  console.error
    Error: {
      message: 'Connection lost',
      statusCode: 500,
      stack: 'Error: Connection lost\n' +
        '    at Object.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/user.mock.test.ts:709:43)\n' +
        '    at Promise.finally.completed (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1557:28)\n' +
        '    at new Promise (<anonymous>)\n' +
        '    at callAsyncCircusFn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1497:10)\n' +
        '    at _callCircusTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1007:40)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at _runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:947:3)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:849:7\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:862:11)\n' +
        '    at _runTestsForDescribeBlock (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:857:11)\n' +
        '    at run (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:761:3)\n' +
        '    at runAndTransformResultsToJestFormat (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/jestAdapterInit.js:1918:21)\n' +
        '    at jestAdapter (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-circus/build/runner.js:101:19)\n' +
        '    at runTestInternal (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:275:16)\n' +
        '    at runTest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-runner/build/index.js:343:7)',
      timestamp: '2025-11-09T07:24:36.635Z',
      path: '/api/user/test-user-id-123',
      method: 'DELETE'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

  console.log
    Test suite completed.

      at Object.<anonymous> (tests/setup.ts:14:11)

PASS tests/with-mocks/user.mock.test.ts
  GET /api/user/profile/:ids - With Mocking
    ‚úì should return 500 when database query fails (18 ms)
    ‚úì should return 400 when invalid ObjectId causes CastError (2 ms)
    ‚úì should handle database timeout gracefully (2 ms)
    ‚úì should return empty array when User.find returns empty (1 ms)
  GET /api/user/settings - With Mocking
    ‚úì should return 500 when user not found in database (13 ms)
    ‚úì should return 500 when database connection fails (3 ms)
    ‚úì should return 400 when invalid ObjectId format (3 ms)
  POST /api/user/profile - With Mocking
    ‚úì should return 500 when user not found (5 ms)
    ‚úì should return 500 when database save operation fails (3 ms)
    ‚úì should return 400 when Mongoose validation fails (3 ms)
  POST /api/user/settings - With Mocking
    ‚úì should return 500 when user not found (5 ms)
    ‚úì should return 500 when database update fails (3 ms)
    ‚úì should handle Google profile picture conversion failure gracefully (5 ms)
  PUT /api/user/profile - With Mocking
    ‚úì should return 500 when user not found (2 ms)
    ‚úì should return 500 when database update fails (2 ms)
    ‚úì should return 400 on validation error (3 ms)
  DELETE /api/user/:userId - With Mocking
    ‚úì should return 500 when user not found (2 ms)
    ‚úì should return 500 when user is in a room (2 ms)
    ‚úì should return 500 when user is in a group (6 ms)
    ‚úì should return 500 when database delete operation fails (2 ms)
    ‚úì should handle database connection loss during deletion (2 ms)

  console.log
    [dotenv@17.2.3] injecting env (3) from .env.test -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

  console.log
    Starting test suite...

      at Object.<anonymous> (tests/setup.ts:9:11)

  console.log
    
    üöÄ Starting Restaurant Tests (With Mocks - Failure Scenarios)...

      at Object.<anonymous> (tests/with-mocks/restaurant.mock.test.ts:42:11)

  console.log
    MongoDB Atlas connected successfully

      at connectDatabase (src/config/database.ts:22:13)

  console.log
    ‚úÖ Test setup complete.

      at Object.<anonymous> (tests/with-mocks/restaurant.mock.test.ts:52:11)

  console.log
    ‚úÖ Using Google Places API with key

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:45:15)

  console.error
    ‚ùå Failed to search restaurants: Service Unavailable

      81 |       if (error instanceof AppError) throw error;
      82 |       const errorMessage = error instanceof Error ? error.message : 'Unknown error';
    > 83 |       console.error('‚ùå Failed to search restaurants:', errorMessage);
         |               ^
      84 |       // Return mock data on error
      85 |       return this.getMockRestaurants();
      86 |     }

      at RestaurantService.error [as searchRestaurants] (src/services/restaurantService.ts:83:15)
      at RestaurantController.searchRestaurants (src/controllers/restaurant.controller.ts:30:27)
      at src/routes/restaurant.routes.ts:14:3
      at src/middleware/errorHandler.ts:58:9

  console.log
    ‚úÖ Using Google Places API with key

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:45:15)

  console.error
    ‚ùå Failed to search restaurants: ETIMEDOUT

      81 |       if (error instanceof AppError) throw error;
      82 |       const errorMessage = error instanceof Error ? error.message : 'Unknown error';
    > 83 |       console.error('‚ùå Failed to search restaurants:', errorMessage);
         |               ^
      84 |       // Return mock data on error
      85 |       return this.getMockRestaurants();
      86 |     }

      at RestaurantService.error [as searchRestaurants] (src/services/restaurantService.ts:83:15)
      at RestaurantController.searchRestaurants (src/controllers/restaurant.controller.ts:30:27)
      at src/routes/restaurant.routes.ts:14:3
      at src/middleware/errorHandler.ts:58:9

  console.log
    ‚úÖ Using Google Places API with key

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:45:15)

  console.error
    ‚ùå Failed to search restaurants: getaddrinfo ENOTFOUND maps.googleapis.com

      81 |       if (error instanceof AppError) throw error;
      82 |       const errorMessage = error instanceof Error ? error.message : 'Unknown error';
    > 83 |       console.error('‚ùå Failed to search restaurants:', errorMessage);
         |               ^
      84 |       // Return mock data on error
      85 |       return this.getMockRestaurants();
      86 |     }

      at RestaurantService.error [as searchRestaurants] (src/services/restaurantService.ts:83:15)
      at RestaurantController.searchRestaurants (src/controllers/restaurant.controller.ts:30:27)
      at src/routes/restaurant.routes.ts:14:3
      at src/middleware/errorHandler.ts:58:9

  console.log
    ‚úÖ Using Google Places API with key

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:45:15)

  console.log
    üì° Google API Response Status: OVER_QUERY_LIMIT

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:63:15)

  console.error
    Error: {
      message: 'Google Places API error: OVER_QUERY_LIMIT',
      statusCode: 500,
      stack: 'AppError: Google Places API error: OVER_QUERY_LIMIT\n' +
        '    at RestaurantService.searchRestaurants (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/services/restaurantService.ts:66:15)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at RestaurantController.searchRestaurants (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/controllers/restaurant.controller.ts:30:27)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/routes/restaurant.routes.ts:14:3\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/errorHandler.ts:58:9',
      timestamp: '2025-11-09T07:24:36.813Z',
      path: '/api/restaurant/search',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at RestaurantController.next [as searchRestaurants] (src/controllers/restaurant.controller.ts:44:7)
      at src/routes/restaurant.routes.ts:14:3
      at src/middleware/errorHandler.ts:58:9

  console.log
    ‚úÖ Using Google Places API with key

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:45:15)

  console.log
    üì° Google API Response Status: REQUEST_DENIED

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:63:15)

  console.error
    Error: {
      message: 'Google Places API error: REQUEST_DENIED',
      statusCode: 500,
      stack: 'AppError: Google Places API error: REQUEST_DENIED\n' +
        '    at RestaurantService.searchRestaurants (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/services/restaurantService.ts:66:15)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at RestaurantController.searchRestaurants (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/controllers/restaurant.controller.ts:30:27)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/routes/restaurant.routes.ts:14:3\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/errorHandler.ts:58:9',
      timestamp: '2025-11-09T07:24:36.817Z',
      path: '/api/restaurant/search',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at RestaurantController.next [as searchRestaurants] (src/controllers/restaurant.controller.ts:44:7)
      at src/routes/restaurant.routes.ts:14:3
      at src/middleware/errorHandler.ts:58:9

  console.log
    ‚úÖ Using Google Places API with key

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:45:15)

  console.log
    üì° Google API Response Status: INVALID_REQUEST

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:63:15)

  console.error
    Error: {
      message: 'Google Places API error: INVALID_REQUEST',
      statusCode: 500,
      stack: 'AppError: Google Places API error: INVALID_REQUEST\n' +
        '    at RestaurantService.searchRestaurants (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/services/restaurantService.ts:66:15)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at RestaurantController.searchRestaurants (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/controllers/restaurant.controller.ts:30:27)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/routes/restaurant.routes.ts:14:3\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/errorHandler.ts:58:9',
      timestamp: '2025-11-09T07:24:36.821Z',
      path: '/api/restaurant/search',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at RestaurantController.next [as searchRestaurants] (src/controllers/restaurant.controller.ts:44:7)
      at src/routes/restaurant.routes.ts:14:3
      at src/middleware/errorHandler.ts:58:9

  console.log
    ‚úÖ Using Google Places API with key

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:45:15)

  console.log
    üì° Google API Response Status: OK

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:63:15)

  console.log
    üçΩÔ∏è Found 0 restaurants from Google Places

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:72:15)

  console.log
    ‚úÖ Using Google Places API with key

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:45:15)

  console.error
    ‚ùå Failed to search restaurants: connect ECONNREFUSED

      81 |       if (error instanceof AppError) throw error;
      82 |       const errorMessage = error instanceof Error ? error.message : 'Unknown error';
    > 83 |       console.error('‚ùå Failed to search restaurants:', errorMessage);
         |               ^
      84 |       // Return mock data on error
      85 |       return this.getMockRestaurants();
      86 |     }

      at RestaurantService.error [as searchRestaurants] (src/services/restaurantService.ts:83:15)
      at RestaurantController.searchRestaurants (src/controllers/restaurant.controller.ts:30:27)
      at src/routes/restaurant.routes.ts:14:3
      at src/middleware/errorHandler.ts:58:9

  console.log
    ‚úÖ Using Google Places API with key

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:45:15)

  console.error
    ‚ùå Failed to search restaurants: unable to verify the first certificate

      81 |       if (error instanceof AppError) throw error;
      82 |       const errorMessage = error instanceof Error ? error.message : 'Unknown error';
    > 83 |       console.error('‚ùå Failed to search restaurants:', errorMessage);
         |               ^
      84 |       // Return mock data on error
      85 |       return this.getMockRestaurants();
      86 |     }

      at RestaurantService.error [as searchRestaurants] (src/services/restaurantService.ts:83:15)
      at RestaurantController.searchRestaurants (src/controllers/restaurant.controller.ts:30:27)
      at src/routes/restaurant.routes.ts:14:3
      at src/middleware/errorHandler.ts:58:9

  console.log
    ‚úÖ Using Google Places API with key

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:45:15)

  console.log
    üì° Google API Response Status: OK

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:63:15)

  console.log
    üçΩÔ∏è Found 1 restaurants from Google Places

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:72:15)

  console.log
    ‚úÖ Using Google Places API with key

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:45:15)

  console.log
    üì° Google API Response Status: ZERO_RESULTS

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:63:15)

  console.log
    üçΩÔ∏è Found 0 restaurants from Google Places

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:72:15)

  console.log
    ‚úÖ Using Google Places API with key

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:45:15)

  console.log
    üì° Google API Response Status: OK

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:63:15)

  console.log
    üçΩÔ∏è Found 2 restaurants from Google Places

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:72:15)

  console.error
    Failed to get restaurant details: Service Unavailable

      118 |       if (error instanceof AppError) throw error;
      119 |       const errorMessage = error instanceof Error ? error.message : 'Unknown error';
    > 120 |       console.error('Failed to get restaurant details:', errorMessage);
          |               ^
      121 |       return this.getMockRestaurant(placeId);
      122 |     }
      123 |   }

      at RestaurantService.error [as getRestaurantDetails] (src/services/restaurantService.ts:120:15)
      at RestaurantController.getRestaurantDetails (src/controllers/restaurant.controller.ts:56:26)
      at src/routes/restaurant.routes.ts:32:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Failed to get restaurant details: ETIMEDOUT

      118 |       if (error instanceof AppError) throw error;
      119 |       const errorMessage = error instanceof Error ? error.message : 'Unknown error';
    > 120 |       console.error('Failed to get restaurant details:', errorMessage);
          |               ^
      121 |       return this.getMockRestaurant(placeId);
      122 |     }
      123 |   }

      at RestaurantService.error [as getRestaurantDetails] (src/services/restaurantService.ts:120:15)
      at RestaurantController.getRestaurantDetails (src/controllers/restaurant.controller.ts:56:26)
      at src/routes/restaurant.routes.ts:32:3
      at src/middleware/errorHandler.ts:58:9

  console.error
    Error: {
      message: 'Restaurant not found: NOT_FOUND',
      statusCode: 404,
      stack: 'AppError: Restaurant not found: NOT_FOUND\n' +
        '    at RestaurantService.getRestaurantDetails (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/services/restaurantService.ts:111:15)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at RestaurantController.getRestaurantDetails (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/controllers/restaurant.controller.ts:56:26)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/routes/restaurant.routes.ts:32:3\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/errorHandler.ts:58:9',
      timestamp: '2025-11-09T07:24:36.848Z',
      path: '/api/restaurant/non-existent-place',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

  console.error
    Error: {
      message: 'Restaurant not found: INVALID_REQUEST',
      statusCode: 404,
      stack: 'AppError: Restaurant not found: INVALID_REQUEST\n' +
        '    at RestaurantService.getRestaurantDetails (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/services/restaurantService.ts:111:15)\n' +
        '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
        '    at RestaurantController.getRestaurantDetails (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/controllers/restaurant.controller.ts:56:26)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/routes/restaurant.routes.ts:32:3\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/errorHandler.ts:58:9',
      timestamp: '2025-11-09T07:24:36.853Z',
      path: '/api/restaurant/invalid_format',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

  console.log
    ‚úÖ Using Google Places API with key

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:45:15)

  console.error
    ‚ùå Failed to search restaurants: API Unavailable

      81 |       if (error instanceof AppError) throw error;
      82 |       const errorMessage = error instanceof Error ? error.message : 'Unknown error';
    > 83 |       console.error('‚ùå Failed to search restaurants:', errorMessage);
         |               ^
      84 |       // Return mock data on error
      85 |       return this.getMockRestaurants();
      86 |     }

      at RestaurantService.error [as searchRestaurants] (src/services/restaurantService.ts:83:15)
      at RestaurantService.getRecommendationsForGroup (src/services/restaurantService.ts:177:25)
      at RestaurantController.getGroupRecommendations (src/controllers/restaurant.controller.ts:87:31)

  console.log
    ‚úÖ Using Google Places API with key

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:45:15)

  console.error
    ‚ùå Failed to search restaurants: ETIMEDOUT

      81 |       if (error instanceof AppError) throw error;
      82 |       const errorMessage = error instanceof Error ? error.message : 'Unknown error';
    > 83 |       console.error('‚ùå Failed to search restaurants:', errorMessage);
         |               ^
      84 |       // Return mock data on error
      85 |       return this.getMockRestaurants();
      86 |     }

      at RestaurantService.error [as searchRestaurants] (src/services/restaurantService.ts:83:15)
      at RestaurantService.getRecommendationsForGroup (src/services/restaurantService.ts:177:25)
      at RestaurantController.getGroupRecommendations (src/controllers/restaurant.controller.ts:87:31)

  console.log
    ‚úÖ Using Google Places API with key

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:45:15)

  console.log
    üì° Google API Response Status: OK

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:63:15)

  console.log
    üçΩÔ∏è Found 1 restaurants from Google Places

      at RestaurantService.log [as searchRestaurants] (src/services/restaurantService.ts:72:15)

  console.error
    Error: {
      message: 'Forced controller failure',
      statusCode: 500,
      stack: 'Error: Forced controller failure\n' +
        '    at RestaurantService.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/tests/with-mocks/restaurant.mock.test.ts:758:15)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-mock/build/index.js:305:39\n' +
        '    at RestaurantService.<anonymous> (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-mock/build/index.js:312:13)\n' +
        '    at RestaurantService.mockConstructor [as searchRestaurants] (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/jest-mock/build/index.js:102:19)\n' +
        '    at RestaurantController.searchRestaurants (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/controllers/restaurant.controller.ts:30:51)\n' +
        '    at searchRestaurants (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/routes/restaurant.routes.ts:14:30)\n' +
        '    at fn (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/errorHandler.ts:58:15)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/errorHandler.ts:62:6\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:157:13)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/src/middleware/auth.middleware.ts:110:5)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:157:13)\n' +
        '    at Route.dispatch (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/route.js:117:3)\n' +
        '    at handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:435:11)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:295:15\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:186:3)\n' +
        '    at router (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:60:12)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at trimPrefix (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:342:13)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:297:9\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at urlencodedParser (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/body-parser/lib/types/urlencoded.js:68:7)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at trimPrefix (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:342:13)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:297:9\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at jsonParser (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/body-parser/lib/types/json.js:100:7)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at trimPrefix (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:342:13)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:297:9\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at cors (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/cors/lib/index.js:188:7)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/cors/lib/index.js:224:17\n' +
        '    at originCallback (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/cors/lib/index.js:214:15)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/cors/lib/index.js:219:13\n' +
        '    at optionsCallback (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/cors/lib/index.js:199:9)\n' +
        '    at corsMiddleware (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/cors/lib/index.js:204:7)\n' +
        '    at Layer.handleRequest (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/lib/layer.js:152:17)\n' +
        '    at trimPrefix (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:342:13)\n' +
        '    at /Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:297:9\n' +
        '    at processParams (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:582:12)\n' +
        '    at next (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:291:5)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/router/index.js:186:3)\n' +
        '    at Function.handle (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/application.js:177:15)\n' +
        '    at Server.app (/Users/hashim/Desktop/Development/FeastFriends/321-project/backend/node_modules/express/lib/express.js:38:9)\n' +
        '    at Server.emit (node:events:519:28)\n' +
        '    at parserOnIncoming (node:_http_server:1173:12)\n' +
        '    at HTTPParser.parserOnHeadersComplete (node:_http_common:121:17)',
      timestamp: '2025-11-09T07:24:36.877Z',
      path: '/api/restaurant/search',
      method: 'GET'
    }

      90 |   }
      91 |
    > 92 |   console.error('Error:', {
         |           ^
      93 |     message: err.message,
      94 |     statusCode,
      95 |     stack: err.stack,

      at error (src/middleware/errorHandler.ts:92:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at node_modules/router/index.js:688:15
      at next (node_modules/router/index.js:276:14)
      at next (node_modules/router/lib/route.js:132:14)
      at RestaurantController.next [as searchRestaurants] (src/controllers/restaurant.controller.ts:44:7)
      at searchRestaurants (src/routes/restaurant.routes.ts:14:30)
      at fn (src/middleware/errorHandler.ts:58:15)
      at src/middleware/errorHandler.ts:62:6
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at next (src/middleware/auth.middleware.ts:110:5)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at next (node_modules/router/lib/route.js:157:13)
      at Route.dispatch (node_modules/router/lib/route.js:117:3)
      at handle (node_modules/router/index.js:435:11)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at node_modules/router/index.js:295:15
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at router (node_modules/router/index.js:60:12)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at urlencodedParser (node_modules/body-parser/lib/types/urlencoded.js:68:7)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at jsonParser (node_modules/body-parser/lib/types/json.js:100:7)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at cors (node_modules/cors/lib/index.js:188:7)
      at node_modules/cors/lib/index.js:224:17
      at originCallback (node_modules/cors/lib/index.js:214:15)
      at node_modules/cors/lib/index.js:219:13
      at optionsCallback (node_modules/cors/lib/index.js:199:9)
      at corsMiddleware (node_modules/cors/lib/index.js:204:7)
      at Layer.handleRequest (node_modules/router/lib/layer.js:152:17)
      at trimPrefix (node_modules/router/index.js:342:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Function.handle (node_modules/router/index.js:186:3)
      at Function.handle (node_modules/express/lib/application.js:177:15)
      at Server.app (node_modules/express/lib/express.js:38:9)

  console.log
    Test suite completed.

      at Object.<anonymous> (tests/setup.ts:14:11)

  console.log
    
    üßπ Cleaning up after tests...

      at Object.<anonymous> (tests/with-mocks/restaurant.mock.test.ts:56:11)

  console.warn
    MongoDB disconnected. Attempting to reconnect...

      28 |
      29 |     mongoose.connection.on('disconnected', () => {
    > 30 |       console.warn('MongoDB disconnected. Attempting to reconnect...');
         |               ^
      31 |     });
      32 |
      33 |     mongoose.connection.on('reconnected', () => {

      at NativeConnection.<anonymous> (src/config/database.ts:30:15)
      at NativeConnection.set (node_modules/mongoose/lib/connection.js:145:12)
      at NativeConnection.onClose (node_modules/mongoose/lib/connection.js:1315:19)
      at NativeConnection._close (node_modules/mongoose/lib/connection.js:1264:12)
      at disconnectDatabase (src/config/database.ts:55:5)
      at Object.<anonymous> (tests/with-mocks/restaurant.mock.test.ts:66:3)

  console.log
    MongoDB disconnected successfully

      at disconnectDatabase (src/config/database.ts:56:13)

  console.log
    ‚úÖ Cleanup complete.

      at Object.<anonymous> (tests/with-mocks/restaurant.mock.test.ts:67:11)

PASS tests/with-mocks/restaurant.mock.test.ts
  GET /api/restaurant/search - External Failures
    ‚úì should return mock data when Google Places API is unavailable (16 ms)
    ‚úì should return mock data when network timeout occurs (3 ms)
    ‚úì should return mock data when DNS resolution fails (3 ms)
    ‚úì should return 500 when API returns OVER_QUERY_LIMIT (10 ms)
    ‚úì should return 500 when API returns REQUEST_DENIED (4 ms)
    ‚úì should return 500 when API returns INVALID_REQUEST (6 ms)
    ‚úì should handle malformed response from Google API (2 ms)
    ‚úì should handle network error (ECONNREFUSED) (2 ms)
    ‚úì should handle SSL/TLS errors (4 ms)
    ‚úì should successfully search restaurants with valid API response (3 ms)
    ‚úì should handle ZERO_RESULTS status gracefully (3 ms)
    ‚úì should filter results by price level when specified (2 ms)
  GET /api/restaurant/:restaurantId - External Failures
    ‚úì should return mock data when Google Places API unavailable (3 ms)
    ‚úì should return mock data when network timeout occurs (2 ms)
    ‚úì should throw 404 when restaurant not found in Google API (2 ms)
    ‚úì should successfully get restaurant details with valid API response (2 ms)
    ‚úì should include photos when restaurant has photos (covers getPhotoUrl) (1 ms)
    ‚úì should return 404 when API returns INVALID_REQUEST (1 ms)
  POST /api/restaurant/recommendations/:groupId - External Failures
    ‚úì should return mock data when Google Places API fails (5 ms)
    ‚úì should handle network timeout when getting recommendations (3 ms)
    ‚úì should aggregate preferences and search successfully (3 ms)
  Request Validation - Controller Level
    ‚úì should return 400 when latitude is missing (1 ms)
    ‚úì should return 400 when longitude is missing (2 ms)
    ‚úì should return 400 when userPreferences is missing in recommendations (1 ms)
    ‚úì should return 400 when userPreferences is not an array (1 ms)
  Controller Catch Block Coverage (next(error))
    ‚úì should call errorHandler when restaurantService throws (7 ms)

---------------------------|---------|----------|---------|---------|------------------------------------------------------------
File                       | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                          
---------------------------|---------|----------|---------|---------|------------------------------------------------------------
All files                  |   58.36 |    49.14 |   56.39 |   58.13 |                                                            
 src                       |   23.33 |        0 |       0 |   23.59 |                                                            
  app.ts                   |   95.45 |      100 |       0 |   95.45 | 26                                                         
  server.ts                |       0 |        0 |       0 |       0 | 1-129                                                      
 src/controllers           |   60.49 |    36.06 |      84 |   60.33 |                                                            
  auth.controller.ts       |   28.18 |    17.07 |   57.14 |   28.18 | 17-245,270,294-302,334-338,344-348,354,379-383,387-391,396 
  group.controller.ts      |   83.33 |       50 |     100 |   83.33 | 27-30,51-56                                                
  matching.controller.ts   |   82.14 |      100 |      80 |   82.14 | 23,39-52,90,110                                            
  restaurant.controller.ts |   96.77 |    85.71 |     100 |   96.77 | 98                                                         
  user.controller.ts       |   86.36 |       50 |     100 |   86.04 | 40,67,127,148-153,158                                      
 src/middleware            |   76.08 |    69.04 |     100 |   74.71 |                                                            
  auth.middleware.ts       |   59.52 |    33.33 |     100 |    57.5 | 25-29,36-41,50-59,71-76,112-113                            
  errorHandler.ts          |      90 |    83.33 |     100 |   89.36 | 23,28,34,40,45                                             
 src/models                |   74.15 |    58.33 |      55 |   73.86 |                                                            
  Group.ts                 |      85 |    58.33 |   77.77 |   84.61 | 116,123-127,143-144                                        
  Room.ts                  |   59.09 |    33.33 |   16.66 |   59.09 | 58,96,103-105,115,120-123                                  
  User.ts                  |   70.37 |    66.66 |      60 |   70.37 | 149,156-158,169,173,177,181                                
 src/routes                |   94.52 |      100 |   78.94 |   94.52 |                                                            
  auth.routes.ts           |   81.25 |      100 |       0 |   81.25 | 16,21,25                                                   
  group.routes.ts          |     100 |      100 |     100 |     100 |                                                            
  matching.routes.ts       |   93.75 |      100 |      80 |   93.75 | 23                                                         
  restaurant.routes.ts     |     100 |      100 |     100 |     100 |                                                            
  user.routes.ts           |     100 |      100 |     100 |     100 |                                                            
 src/services              |   54.78 |    50.39 |   59.09 |   54.32 |                                                            
  authService.ts           |   11.26 |        0 |   11.11 |   11.26 | 18-216                                                     
  groupService.ts          |   63.46 |       48 |      50 |   63.46 | 12-40,55,60,65,169,174,188,248,283-363                     
  matchingService.ts       |      50 |    53.44 |   71.42 |    48.8 | 34-70,126-172,238,245-304,324,342-384                      
  notificationService.ts   |   35.41 |        0 |       0 |   24.39 | 12-28,39-55,66,76,87-97,107-116,127-137                    
  restaurantService.ts     |   94.82 |       80 |     100 |   93.87 | 41-42,95                                                   
  userService.ts           |   70.78 |    68.33 |    87.5 |   83.33 | 12,22-29,106,185-186,194,219                               
 src/utils                 |   22.85 |       10 |   14.28 |   23.52 |                                                            
  socketManager.ts         |   22.85 |       10 |   14.28 |   23.52 | 28-177                                                     
---------------------------|---------|----------|---------|---------|------------------------------------------------------------
Jest: "global" coverage threshold for statements (70%) not met: 58.36%
Jest: "global" coverage threshold for branches (70%) not met: 49.14%
Jest: "global" coverage threshold for lines (70%) not met: 58.13%
Jest: "global" coverage threshold for functions (70%) not met: 56.39%
Test Suites: 6 passed, 6 total
Tests:       135 passed, 135 total
Snapshots:   0 total
Time:        3.626 s
Ran all test suites matching tests/with-mocks.
